---
import Layout from '../../layouts/Layout.astro';
---

<Layout title="Task Queue API ‚Äî Syst√®me de file d'attente asynchrone | Aur√©lie Tesson" description="Syst√®me de file d'attente asynchrone avec RabbitMQ et Symfony Messenger. Traitement de jobs en arri√®re-plan." activePage="projets">
  <!-- Project Header -->
  <section class="project-detail-header">
    <div class="container">
      <a href="/projets" class="back-link">‚Üê Retour aux projets</a>
      <div class="project-meta">
        <span class="project-type-badge">Queue System</span>
        <span class="project-status-demo">D√©mo disponible</span>
      </div>
      <h1>Task Queue API</h1>
      <p class="project-subtitle">Syst√®me de file d'attente asynchrone avec RabbitMQ et Symfony Messenger. Traitement de jobs en arri√®re-plan avec retry automatique et monitoring.</p>
    </div>
  </section>

  <!-- Project Content -->
  <section class="project-content-section">
    <div class="container">
      <div class="content-grid">
        <div class="content-main">
          <div class="content-section">
            <h2>Le projet</h2>
            <p>Une API pour soumettre et g√©rer des t√¢ches asynchrones. Id√©ale pour les op√©rations longues ou gourmandes en ressources : envoi d'emails en masse, g√©n√©ration de rapports, traitement d'images, synchronisation de donn√©es.</p>
            <p>Utilise Symfony Messenger avec RabbitMQ comme broker de messages, offrant fiabilit√©, retry automatique et scalabilit√© horizontale via les workers.</p>
          </div>

          <div class="content-section">
            <h2>Aper√ßu</h2>
            <div class="screenshots-grid">
              <figure class="screenshot">
                <div class="screenshot-placeholder">
                  <span>üì•</span>
                  <p>Soumission job</p>
                </div>
                <figcaption>Interface de cr√©ation de t√¢che</figcaption>
              </figure>
              <figure class="screenshot">
                <div class="screenshot-placeholder">
                  <span>üê∞</span>
                  <p>RabbitMQ Dashboard</p>
                </div>
                <figcaption>Monitoring des queues</figcaption>
              </figure>
              <figure class="screenshot">
                <div class="screenshot-placeholder">
                  <span>üìä</span>
                  <p>Statut jobs</p>
                </div>
                <figcaption>Suivi des t√¢ches en cours</figcaption>
              </figure>
            </div>
          </div>

          <div class="content-section">
            <h2>Architecture</h2>
            <div class="queue-architecture">
              <div class="queue-flow">
                <div class="queue-step">
                  <span class="queue-icon">üì•</span>
                  <strong>API Endpoint</strong>
                  <span>Soumission des jobs</span>
                </div>
                <div class="queue-arrow">‚Üí</div>
                <div class="queue-step">
                  <span class="queue-icon">üê∞</span>
                  <strong>RabbitMQ</strong>
                  <span>File d'attente</span>
                </div>
                <div class="queue-arrow">‚Üí</div>
                <div class="queue-step">
                  <span class="queue-icon">‚öôÔ∏è</span>
                  <strong>Workers</strong>
                  <span>Traitement async</span>
                </div>
                <div class="queue-arrow">‚Üí</div>
                <div class="queue-step">
                  <span class="queue-icon">‚úÖ</span>
                  <strong>Callback</strong>
                  <span>Notification</span>
                </div>
              </div>
            </div>
          </div>

          <div class="content-section">
            <h2>Fonctionnalit√©s</h2>
            <div class="features-list">
              <div class="feature-item">
                <span class="feature-check">‚úì</span>
                <div class="feature-text">
                  <strong>Soumission de jobs</strong>
                  <span>API REST pour cr√©er des t√¢ches avec payload personnalis√©</span>
                </div>
              </div>
              <div class="feature-item">
                <span class="feature-check">‚úì</span>
                <div class="feature-text">
                  <strong>Retry automatique</strong>
                  <span>3 tentatives avec backoff exponentiel en cas d'√©chec</span>
                </div>
              </div>
              <div class="feature-item">
                <span class="feature-check">‚úì</span>
                <div class="feature-text">
                  <strong>Dead letter queue</strong>
                  <span>Jobs en √©chec conserv√©s pour analyse</span>
                </div>
              </div>
              <div class="feature-item">
                <span class="feature-check">‚úì</span>
                <div class="feature-text">
                  <strong>Priorit√©s</strong>
                  <span>Files de priorit√© haute, normale, basse</span>
                </div>
              </div>
              <div class="feature-item">
                <span class="feature-check">‚úì</span>
                <div class="feature-text">
                  <strong>Monitoring</strong>
                  <span>Endpoint de statut et m√©triques des queues</span>
                </div>
              </div>
            </div>
          </div>

          <div class="content-section">
            <h2>Cas d'usage</h2>
            <ul class="use-cases-simple">
              <li>Envoi d'emails en masse (newsletters, notifications)</li>
              <li>G√©n√©ration de rapports PDF volumineux</li>
              <li>Traitement et redimensionnement d'images</li>
              <li>Import/export de donn√©es CSV</li>
              <li>Synchronisation avec APIs externes</li>
              <li>Calculs intensifs diff√©r√©s</li>
            </ul>
          </div>
        </div>

        <aside class="content-sidebar">
          <div class="sidebar-card sidebar-stack">
            <h3>Stack</h3>
            <div class="stack-badges">
              <span class="stack-badge backend">PHP 8.3</span>
              <span class="stack-badge backend">Symfony 7.2</span>
              <span class="stack-badge api">Messenger</span>
              <span class="stack-badge tool">RabbitMQ</span>
              <span class="stack-badge db">Redis</span>
              <span class="stack-badge infra">Docker</span>
              <span class="stack-badge infra">Supervisor</span>
            </div>
          </div>

          <div class="sidebar-card sidebar-code">
            <h3>Code source</h3>
            <a href="https://github.com/aurelie-tech/task-queue-api" target="_blank" class="code-badge public">
              <span class="code-icon">üìÇ</span>
              <span>Voir sur GitHub</span>
            </a>
          </div>

          <div class="sidebar-card cta-card-sidebar">
            <h3>Besoin d'async ?</h3>
            <p>Je peux impl√©menter un syst√®me de queue pour vos traitements lourds.</p>
            <a href="/contact" class="btn btn-primary btn-small">Me contacter</a>
          </div>
        </aside>
      </div>
    </div>
  </section>

  <!-- Other Projects -->
  <section class="other-projects">
    <div class="container">
      <h2>Autres projets</h2>
      <div class="other-projects-grid">
        <a href="/projets/wms" class="other-project-card">
          <span class="other-project-icon">üè≠</span>
          <h4>WMS</h4>
          <p>Syst√®me de gestion d'entrep√¥t</p>
        </a>
        <a href="/projets/stock-api" class="other-project-card">
          <span class="other-project-icon">üì¶</span>
          <h4>Stock API</h4>
          <p>API REST gestion de stock</p>
        </a>
        <a href="/projets/logidoc-ai" class="other-project-card">
          <span class="other-project-icon">ü§ñ</span>
          <h4>LogiDoc AI</h4>
          <p>Analyse documentaire IA</p>
        </a>
      </div>
    </div>
  </section>
</Layout>

<style>
  .project-status-demo {
    background: rgba(96, 165, 250, 0.15);
    color: var(--accent-primary);
    padding: 0.4rem 1rem;
    border-radius: 20px;
    font-size: 0.85rem;
    font-weight: 500;
  }

  .queue-architecture {
    background: var(--surface-light);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 2rem;
    overflow-x: auto;
  }

  .queue-flow {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.5rem;
    min-width: 600px;
  }

  .queue-step {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 1rem;
    text-align: center;
    flex: 1;
  }

  .queue-icon {
    font-size: 1.75rem;
    display: block;
    margin-bottom: 0.5rem;
  }

  .queue-step strong {
    display: block;
    font-size: 0.9rem;
    margin-bottom: 0.25rem;
  }

  .queue-step span {
    color: var(--text-muted);
    font-size: 0.8rem;
  }

  .queue-arrow {
    color: var(--accent-primary);
    font-size: 1.5rem;
    flex-shrink: 0;
  }

  .use-cases-simple {
    list-style: none;
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 0.75rem;
  }

  .use-cases-simple li {
    padding: 0.75rem 1rem;
    padding-left: 2rem;
    position: relative;
    background: var(--surface-light);
    border: 1px solid var(--border);
    border-radius: 8px;
    color: var(--text-secondary);
    font-size: 0.9rem;
  }

  .use-cases-simple li::before {
    content: "‚Üí";
    position: absolute;
    left: 0.75rem;
    color: var(--accent-primary);
  }

  @media (max-width: 1024px) {
    .use-cases-simple {
      grid-template-columns: 1fr;
    }
  }

  @media (max-width: 768px) {
    .queue-flow {
      flex-direction: column;
      min-width: auto;
    }
    .queue-arrow {
      transform: rotate(90deg);
    }
  }
</style>
