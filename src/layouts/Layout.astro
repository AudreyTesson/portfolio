---
import '../styles/global.css';
import SEO from '../components/SEO.astro';

interface Props {
  title: string;
  description?: string;
  activePage?: string;
  image?: string;
  type?: 'website' | 'article' | 'profile';
  keywords?: string[];
  canonical?: string;
}

const {
  title,
  description = "D√©veloppeuse Full-Stack PHP/Symfony et Tech Lead. Architecture robuste, int√©gration IA, DevOps. Disponible en remote.",
  activePage = "",
  image = "/og-image.svg",
  type = "website",
  keywords = ['Symfony', 'PHP', 'D√©veloppeur Freelance', 'API', 'Full-Stack', 'Tech Lead'],
  canonical
} = Astro.props;
---

<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{title}</title>
  <SEO
    title={title}
    description={description}
    image={image}
    type={type}
    keywords={keywords}
    canonical={canonical}
  />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
</head>
<body>
  <!-- Aurora Background -->
  <div class="aurora">
    <div class="aurora-layer"></div>
  </div>

  <!-- Navigation -->
  <nav>
    <div class="nav-container">
      <a href="/" class="logo">audrey.dev</a>
      <ul class="nav-links">
        <li><a href="/about" class={activePage === 'about' ? 'active' : ''}>√Ä propos</a></li>
        <li><a href="/services" class={activePage === 'services' ? 'active' : ''}>Services</a></li>
        <li><a href="/projets" class={activePage === 'projets' ? 'active' : ''}>Projets</a></li>
        <li><a href="/contact" class={activePage === 'contact' ? 'active' : ''}>Contact</a></li>
      </ul>
      <div class="nav-right">
        <button class="theme-toggle" id="themeToggle" aria-label="Changer de th√®me">
          <span class="theme-toggle-icon active" id="moonIcon">üåô</span>
          <div class="theme-toggle-track">
            <div class="theme-toggle-thumb"></div>
          </div>
          <span class="theme-toggle-icon" id="sunIcon">‚òÄÔ∏è</span>
        </button>
        <a href="/contact" class="nav-cta">Me contacter</a>
      </div>
      <button class="mobile-menu-btn" id="mobileMenuBtn">‚ò∞</button>
    </div>
    <div class="mobile-menu" id="mobileMenu">
      <a href="/about">√Ä propos</a>
      <a href="/services">Services</a>
      <a href="/projets">Projets</a>
      <a href="/contact">Contact</a>
    </div>
  </nav>

  <main>
    <slot />
  </main>

  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="footer-grid">
        <div class="footer-brand">
          <span class="logo">audrey.dev</span>
          <p>D√©veloppeuse Full-Stack Symfony & Tech Lead</p>
        </div>
        <div class="footer-links">
          <h4>Navigation</h4>
          <ul>
            <li><a href="/about">√Ä propos</a></li>
            <li><a href="/services">Services</a></li>
            <li><a href="/projets">Projets</a></li>
            <li><a href="/contact">Contact</a></li>
          </ul>
        </div>
        <div class="footer-links">
          <h4>Projets</h4>
          <ul>
            <li><a href="/projets/wms">WMS</a></li>
            <li><a href="/projets/logidoc-ai">LogiDoc AI</a></li>
            <li><a href="/projets/realtime-dashboard">Realtime Dashboard</a></li>
            <li><a href="/projets/saas-boilerplate">SaaS Boilerplate</a></li>
          </ul>
        </div>
        <div class="footer-social">
          <h4>Me suivre</h4>
          <div class="social-links">
            <a href="https://www.linkedin.com/in/audrey-tesson-dev/" target="_blank" rel="noopener noreferrer" class="social-link" aria-label="LinkedIn">in</a>
            <a href="https://github.com/AudreyTesson" target="_blank" rel="noopener noreferrer" class="social-link" aria-label="GitHub">gh</a>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        <span>¬© 2025 Audrey Tesson</span>
        <span>100% Remote</span>
      </div>
    </div>
  </footer>

  <script>
    // Mobile menu toggle
    function toggleMenu() {
      document.getElementById('mobileMenu')?.classList.toggle('active');
    }
    document.getElementById('mobileMenuBtn')?.addEventListener('click', toggleMenu);

    // Theme toggle
    function initTheme() {
      const savedTheme = localStorage.getItem('theme');
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

      // Default to dark theme
      if (savedTheme === 'light') {
        document.documentElement.setAttribute('data-theme', 'light');
        updateToggleIcons('light');
      } else {
        document.documentElement.removeAttribute('data-theme');
        updateToggleIcons('dark');
      }
    }

    function updateToggleIcons(theme: string) {
      const moonIcon = document.getElementById('moonIcon');
      const sunIcon = document.getElementById('sunIcon');

      if (theme === 'light') {
        moonIcon?.classList.remove('active');
        sunIcon?.classList.add('active');
      } else {
        moonIcon?.classList.add('active');
        sunIcon?.classList.remove('active');
      }
    }

    function toggleTheme() {
      const currentTheme = document.documentElement.getAttribute('data-theme');

      if (currentTheme === 'light') {
        document.documentElement.removeAttribute('data-theme');
        localStorage.setItem('theme', 'dark');
        updateToggleIcons('dark');
      } else {
        document.documentElement.setAttribute('data-theme', 'light');
        localStorage.setItem('theme', 'light');
        updateToggleIcons('light');
      }
    }

    // Initialize theme on page load
    initTheme();

    // Add click listener for theme toggle
    document.getElementById('themeToggle')?.addEventListener('click', toggleTheme);
  </script>
</body>
</html>
